<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Writing Correct Programs - Introduction to Programming Using Java</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">

<link rel="stylesheet" href="code-class.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html" >Introduction to Programming Using Java</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded "><a href="ch01-00-Overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-FetchExecuteCycle.html"><strong aria-hidden="true">1.1.</strong> Fetch and Execute Cycle</a></li><li class="chapter-item expanded "><a href="ch01-02-AsynchronousEvents.html"><strong aria-hidden="true">1.2.</strong> Asynchronous Events</a></li><li class="chapter-item expanded "><a href="ch01-03-JavaVirtualMachine.html"><strong aria-hidden="true">1.3.</strong> The Java Virtual Machine</a></li><li class="chapter-item expanded "><a href="ch01-04-FundamentalBuildingBlocks.html"><strong aria-hidden="true">1.4.</strong> Fundamentals</a></li><li class="chapter-item expanded "><a href="ch01-05-OOP.html"><strong aria-hidden="true">1.5.</strong> Object Oriented Programming</a></li><li class="chapter-item expanded "><a href="ch01-06-ModernUserInterface.html"><strong aria-hidden="true">1.6.</strong> Modern User Interface</a></li><li class="chapter-item expanded "><a href="ch01-07-InternetAndBeyond.html"><strong aria-hidden="true">1.7.</strong> Internet and Beyond</a></li><li class="chapter-item expanded "><a href="ch01-08-Quiz.html"><strong aria-hidden="true">1.8.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-NameAndThings.html"><strong aria-hidden="true">2.</strong> Name and Things</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-BasicJavaApplication.html"><strong aria-hidden="true">2.1.</strong> Basic Java Application</a></li><li class="chapter-item expanded "><a href="ch02-02-VariablesAndTypes.html"><strong aria-hidden="true">2.2.</strong> Variables and Types</a></li><li class="chapter-item expanded "><a href="ch02-03-ObjectsAndSubroutines.html"><strong aria-hidden="true">2.3.</strong> Objects and Subroutines</a></li><li class="chapter-item expanded "><a href="ch02-04-TextInputAndOutput.html"><strong aria-hidden="true">2.4.</strong> Text Input and Output</a></li><li class="chapter-item expanded "><a href="ch02-05-DetailsOfExpressions.html"><strong aria-hidden="true">2.5.</strong> Details of Expressions</a></li><li class="chapter-item expanded "><a href="ch02-06-ProgrammingEnvironments.html"><strong aria-hidden="true">2.6.</strong> Programming and Environments</a></li><li class="chapter-item expanded "><a href="ch02-07-Exercises.html"><strong aria-hidden="true">2.7.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch02-08-Quiz.html"><strong aria-hidden="true">2.8.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch03-00-Control.html"><strong aria-hidden="true">3.</strong> Control</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-BlocksLoopsBranches.html"><strong aria-hidden="true">3.1.</strong> Blocks, Loops and Branches</a></li><li class="chapter-item expanded "><a href="ch03-02-AlgorithmDevelopment.html"><strong aria-hidden="true">3.2.</strong> Algorithm Development</a></li><li class="chapter-item expanded "><a href="ch03-03-While.html"><strong aria-hidden="true">3.3.</strong> while and do...while</a></li><li class="chapter-item expanded "><a href="ch03-04-For.html"><strong aria-hidden="true">3.4.</strong> The for statement</a></li><li class="chapter-item expanded "><a href="ch03-05-If.html"><strong aria-hidden="true">3.5.</strong> The If Statement</a></li><li class="chapter-item expanded "><a href="ch03-06-Switch.html"><strong aria-hidden="true">3.6.</strong> The Switch Statement</a></li><li class="chapter-item expanded "><a href="ch03-07-ExceptionsTryCatch.html"><strong aria-hidden="true">3.7.</strong> Exceptions and try...catch</a></li><li class="chapter-item expanded "><a href="ch03-08-Arrays.html"><strong aria-hidden="true">3.8.</strong> Arrays: An Introduction</a></li><li class="chapter-item expanded "><a href="ch03-09-GUI.html"><strong aria-hidden="true">3.9.</strong> GUI: An Introduction</a></li><li class="chapter-item expanded "><a href="ch03-10-Exercises.html"><strong aria-hidden="true">3.10.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch03-11-Quiz.html"><strong aria-hidden="true">3.11.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-Subroutines.html"><strong aria-hidden="true">4.</strong> Subroutines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-BlackBoxes.html"><strong aria-hidden="true">4.1.</strong> Black Boxes</a></li><li class="chapter-item expanded "><a href="ch04-02-StaticSubroutines.html"><strong aria-hidden="true">4.2.</strong> Static Subroutines and Variables</a></li><li class="chapter-item expanded "><a href="ch04-03-Parameters.html"><strong aria-hidden="true">4.3.</strong> Parameters</a></li><li class="chapter-item expanded "><a href="ch04-04-ReturnValues.html"><strong aria-hidden="true">4.4.</strong> Return Values</a></li><li class="chapter-item expanded "><a href="ch04-05-Lambda.html"><strong aria-hidden="true">4.5.</strong> Lambda Expressions</a></li><li class="chapter-item expanded "><a href="ch04-06-APIPackagesModulesJavadoc.html"><strong aria-hidden="true">4.6.</strong> API, Packages, Modules and Javadoc</a></li><li class="chapter-item expanded "><a href="ch04-07-MoreOnProgramDesign.html"><strong aria-hidden="true">4.7.</strong> More on Program Design</a></li><li class="chapter-item expanded "><a href="ch04-08-TruthAboutDeclarations.html"><strong aria-hidden="true">4.8.</strong> Truth about Declarations</a></li><li class="chapter-item expanded "><a href="ch04-09-Exercises.html"><strong aria-hidden="true">4.9.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch04-10-Quiz.html"><strong aria-hidden="true">4.10.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-ObjectsClasses.html"><strong aria-hidden="true">5.</strong> Objects and Classes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-ObjectsAndInstanceMethods.html"><strong aria-hidden="true">5.1.</strong> Objects and Instance Methods</a></li><li class="chapter-item expanded "><a href="ch05-02-ConstructorObjectInit.html"><strong aria-hidden="true">5.2.</strong> Constructor and Object Initialization</a></li><li class="chapter-item expanded "><a href="ch05-03-ProgrammingWithObjects.html"><strong aria-hidden="true">5.3.</strong> Programming with Objects</a></li><li class="chapter-item expanded "><a href="ch05-04-AnExample.html"><strong aria-hidden="true">5.4.</strong> An Example</a></li><li class="chapter-item expanded "><a href="ch05-05-InheritanceAndPolymorphism.html"><strong aria-hidden="true">5.5.</strong> Inheritance and Polymorphism</a></li><li class="chapter-item expanded "><a href="ch05-06-thisandsuper.html"><strong aria-hidden="true">5.6.</strong> this and super</a></li><li class="chapter-item expanded "><a href="ch05-07-Interfaces.html"><strong aria-hidden="true">5.7.</strong> Interfaces</a></li><li class="chapter-item expanded "><a href="ch05-08-NestedClasses.html"><strong aria-hidden="true">5.8.</strong> Nested Classes</a></li><li class="chapter-item expanded "><a href="ch05-09-Exercises.html"><strong aria-hidden="true">5.9.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch05-10-Quiz.html"><strong aria-hidden="true">5.10.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch06-00-GUIProgramming.html"><strong aria-hidden="true">6.</strong> Introduction to GUI Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch06-01-BasicJavaFXApp.html"><strong aria-hidden="true">6.1.</strong> A Basic JavaFX Application</a></li><li class="chapter-item expanded "><a href="ch06-02-BasicClasses.html"><strong aria-hidden="true">6.2.</strong> Basic Classes</a></li><li class="chapter-item expanded "><a href="ch06-03-BasicEvents.html"><strong aria-hidden="true">6.3.</strong> Basic Events</a></li><li class="chapter-item expanded "><a href="ch06-04-BasicControls.html"><strong aria-hidden="true">6.4.</strong> Basic Controls</a></li><li class="chapter-item expanded "><a href="ch06-05-BasicLayout.html"><strong aria-hidden="true">6.5.</strong> Basic Layout</a></li><li class="chapter-item expanded "><a href="ch06-06-CompetePrograms.html"><strong aria-hidden="true">6.6.</strong> Complete Programs</a></li><li class="chapter-item expanded "><a href="ch06-07-Exercises.html"><strong aria-hidden="true">6.7.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch06-08-Quiz.html"><strong aria-hidden="true">6.8.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch07-00-ArraysArraylistsRecords.html"><strong aria-hidden="true">7.</strong> Arrays, ArrayLists and Records</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch07-01-ArrayDetails.html"><strong aria-hidden="true">7.1.</strong> Array Details</a></li><li class="chapter-item expanded "><a href="ch07-02-ArrayProcessing.html"><strong aria-hidden="true">7.2.</strong> Array Processing</a></li><li class="chapter-item expanded "><a href="ch07-03-ArrayLists.html"><strong aria-hidden="true">7.3.</strong> ArrayLists</a></li><li class="chapter-item expanded "><a href="ch07-04-Records.html"><strong aria-hidden="true">7.4.</strong> Records</a></li><li class="chapter-item expanded "><a href="ch07-05-SearchingAndSorting.html"><strong aria-hidden="true">7.5.</strong> Searching and Sorting</a></li><li class="chapter-item expanded "><a href="ch07-06-2DArrays.html"><strong aria-hidden="true">7.6.</strong> 2D Arrays</a></li><li class="chapter-item expanded "><a href="ch07-07-Exercises.html"><strong aria-hidden="true">7.7.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch07-08-Quiz.html"><strong aria-hidden="true">7.8.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch08-00-CorrectnessRobustnessEfficiency.html"><strong aria-hidden="true">8.</strong> Correctness, Robustness, Efficiency</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch08-01-IntroductionCorrectnessandRobustness.html"><strong aria-hidden="true">8.1.</strong> Introduction to Correctness and Robustness</a></li><li class="chapter-item expanded "><a class="active" href="ch08-02-WritingCorrectPrograms.html"><strong aria-hidden="true">8.2.</strong> Writing Correct Programs</a></li><li class="chapter-item expanded "><a href="ch08-03-ExceptionsAndtrycatch.html"><strong aria-hidden="true">8.3.</strong> Exceptions and try..catch</a></li><li class="chapter-item expanded "><a href="ch08-04-AssertionsAnnotations.html"><strong aria-hidden="true">8.4.</strong> Assertions and Annotations</a></li><li class="chapter-item expanded "><a href="ch08-05-AnalysisofAlgorithms.html"><strong aria-hidden="true">8.5.</strong> Analysis of Algorithms</a></li><li class="chapter-item expanded "><a href="ch08-06-Exercises.html"><strong aria-hidden="true">8.6.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch08-07-Quiz.html"><strong aria-hidden="true">8.7.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch09-00-LinkedDataStructuresRecursion.html"><strong aria-hidden="true">9.</strong> Linked Data Structures and Recursion</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch09-01-Recursion.html"><strong aria-hidden="true">9.1.</strong> Recursion</a></li><li class="chapter-item expanded "><a href="ch09-02-LinkedDataStructures.html"><strong aria-hidden="true">9.2.</strong> Linked Data Structures</a></li><li class="chapter-item expanded "><a href="ch09-03-StacksQueuesADTs.html"><strong aria-hidden="true">9.3.</strong> Stacks, Queues and ADTs</a></li><li class="chapter-item expanded "><a href="ch09-04-BinaryTrees.html"><strong aria-hidden="true">9.4.</strong> Binary Trees</a></li><li class="chapter-item expanded "><a href="ch09-05-SimpleRecursiveDescentParser.html"><strong aria-hidden="true">9.5.</strong> A Simple Recursive Descent Parser</a></li><li class="chapter-item expanded "><a href="ch09-06-Exercises.html"><strong aria-hidden="true">9.6.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch09-07-Quiz.html"><strong aria-hidden="true">9.7.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch10-00-GenericProgrammingandCollectionClasses.html"><strong aria-hidden="true">10.</strong> Generic Programmingand Collection Classes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch10-01-GenericProgramming.html"><strong aria-hidden="true">10.1.</strong> Generic Programming</a></li><li class="chapter-item expanded "><a href="ch10-02-ListsandSets.html"><strong aria-hidden="true">10.2.</strong> Lists and Sets</a></li><li class="chapter-item expanded "><a href="ch10-03-Maps.html"><strong aria-hidden="true">10.3.</strong> Maps</a></li><li class="chapter-item expanded "><a href="ch10-04-JCF.html"><strong aria-hidden="true">10.4.</strong> Programming with the JCF</a></li><li class="chapter-item expanded "><a href="ch10-05-WritingGenericClassesandMethods.html"><strong aria-hidden="true">10.5.</strong> Writing Generic Classes and Methods</a></li><li class="chapter-item expanded "><a href="ch10-06-StreamAPI.html"><strong aria-hidden="true">10.6.</strong> Stream APIs</a></li><li class="chapter-item expanded "><a href="ch10-07-Exercises.html"><strong aria-hidden="true">10.7.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch10-08-Quiz.html"><strong aria-hidden="true">10.8.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch11-00-IOStreamsFilesNetworking.html"><strong aria-hidden="true">11.</strong> I/O Streams, Files, and Networking</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch11-01-IOStreamsReadersAndWriters.html"><strong aria-hidden="true">11.1.</strong> I/O Streams, Readers, and Writers</a></li><li class="chapter-item expanded "><a href="ch11-02-Files.html"><strong aria-hidden="true">11.2.</strong> Files</a></li><li class="chapter-item expanded "><a href="ch11-03-ProgrammingWithFiles.html"><strong aria-hidden="true">11.3.</strong> Programming With Files</a></li><li class="chapter-item expanded "><a href="ch11-04-Networking.html"><strong aria-hidden="true">11.4.</strong> Networking</a></li><li class="chapter-item expanded "><a href="ch11-05-XML.html"><strong aria-hidden="true">11.5.</strong> A Brief Introduction to XML</a></li><li class="chapter-item expanded "><a href="ch11-06-Exercises.html"><strong aria-hidden="true">11.6.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch11-07-Quiz.html"><strong aria-hidden="true">11.7.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch12-00-ThreadsandMultiprocessing.html"><strong aria-hidden="true">12.</strong> Threads and Multiprocessing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch12-01-IntroductiontoThreads.html"><strong aria-hidden="true">12.1.</strong> Introduction to Threads</a></li><li class="chapter-item expanded "><a href="ch12-02-ProgrammingwithThreads.html"><strong aria-hidden="true">12.2.</strong> Programming with Threads</a></li><li class="chapter-item expanded "><a href="ch12-03-ThreadsandParallelProcessing.html"><strong aria-hidden="true">12.3.</strong> Threads and Parallel Processing</a></li><li class="chapter-item expanded "><a href="ch12-04-ThreadsandNetworking.html"><strong aria-hidden="true">12.4.</strong> Threads and Networking</a></li><li class="chapter-item expanded "><a href="ch12-05-NetworkProgrammingExample.html"><strong aria-hidden="true">12.5.</strong> Network Programming Example</a></li><li class="chapter-item expanded "><a href="ch12-06-Exercises.html"><strong aria-hidden="true">12.6.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch12-07-Quiz.html"><strong aria-hidden="true">12.7.</strong> Quiz</a></li></ol></li><li class="chapter-item expanded "><a href="ch13-00-GUIProgrammingContinued.html"><strong aria-hidden="true">13.</strong> GUI Programming Continued</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch13-01-PropertiesandBindings.html"><strong aria-hidden="true">13.1.</strong> Properties and Bindings</a></li><li class="chapter-item expanded "><a href="ch13-02-FancierGraphics.html"><strong aria-hidden="true">13.2.</strong> Fancier Graphics</a></li><li class="chapter-item expanded "><a href="ch13-03-ComplexComponentsandMVC.html"><strong aria-hidden="true">13.3.</strong> Complex Components and MVC</a></li><li class="chapter-item expanded "><a href="ch13-04-MostlyWindowsandDialogs.html"><strong aria-hidden="true">13.4.</strong> Mostly Windows and Dialogs</a></li><li class="chapter-item expanded "><a href="ch13-05-FinishingTouches.html"><strong aria-hidden="true">13.5.</strong> Finishing Touches</a></li><li class="chapter-item expanded "><a href="ch13-06-Exercises.html"><strong aria-hidden="true">13.6.</strong> Exercises</a></li><li class="chapter-item expanded "><a href="ch13-07-Quiz.html"><strong aria-hidden="true">13.7.</strong> Quiz</a></li></ol><li class="chapter-item expanded "><a href="appendix-00.html"> Appendix</a></li><li class="chapter-item expanded "><a href="glossary-00.html"> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="Java">Java</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Introduction to Programming Using Java</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Xayarsh/Java-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="Writing Correct Programs"><a class="header" href="#Writing Correct Programs">Writing Correct Programs</a></h2>
                        <p>
                            Correct programs don't just happen. It takes
                            planning and attention to detail to avoid errors in programs. There are some
                            techniques that programmers can use to increase the likelihood that their
                            programs are correct.</p>



                        <h3 id="Provably Correct Programs"><a class="header" href="#Provably Correct Programs">Provably Correct Programs</a></h3>

                        <p>In some cases, it is possible to <b>prove</b> that a program is
                            correct. That is, it is possible to demonstrate mathematically that the
                            sequence of computations represented by the program will always produce the
                            correct result. Rigorous proof is difficult enough that in practice it can only
                            be applied to fairly small programs. Furthermore, it depends on the fact that
                            the "correct result" has been specified correctly and completely. As I've
                            already pointed out, a program that correctly meets its specification is not
                            useful if its specification was wrong. Nevertheless, even in everyday
                            programming, we can apply some of the ideas and techniques that are used in
                            proving that programs are correct.</p>


                        <p>The fundamental ideas are <span class="newword">process</span> and
                            <span class="newword">state</span>. A state consists of all the information
                            relevant to the execution of a program at a given moment during its execution.
                            The state includes, for example, the values of all the
                            variables in the program, the output that has been produced, any input that is
                            waiting to be read, and a record of the position in the program where the
                            computer is working. A process is the sequence of states that the computer goes
                            through as it executes the program. From this point of view, the meaning of a
                            statement in a program can be expressed in terms of the effect that the
                            execution of that statement has on the computer's state. As a simple example,
                            the meaning of the assignment statement "<span class="code">x&nbsp;=&nbsp;7;</span>" is that
                            after this statement is executed, the value of the variable <span class="code">x</span> will be
                            7. We can be absolutely sure of this fact, so it is something upon which we can
                            build part of a mathematical proof.</p>


                        <p>In fact, it is often possible to look at a program and deduce that some fact
                            must be true at a given point during the execution of a program. For example,
                            consider the <span class="code">do</span> loop:</p>


                        <pre><code class="java">do {
   System.out.print("Enter a positive integer: ");
   N = TextIO.getlnInt();
} while (N &lt;= 0);</code></pre>


                        <p>After this loop ends, we can be absolutely sure that the value of the
                            variable <span class="code">N</span> is greater than zero. The loop cannot end until this
                            condition is satisfied. This fact is part of the meaning of the <span class="code">while</span>
                            loop. More generally, if a <span class="code">while</span> loop uses the test "<span class="code">while
(<span class="bnf">condition</span>)</span>", and if there are no <span class="code">break</span>
                            statements in the loop, then after the loop ends, we can be
                            sure that the <span class="code"><span class="bnf">condition</span></span> is false. We can then
                            use this fact to draw further deductions about what happens as the execution of
                            the program continues. (With a loop, by the way, we also have to worry about
                            the question of whether the loop will ever end. This is something that has to
                            be verified separately.)</p>
                        
                        <h3 id="Preconditions and Postconditions"><a class="header" href="#Preconditions and Postconditions">Preconditions and Postconditions</a></h3>

                        <p>A fact that can be proven to be true after a given program segment has been
                            executed is called a <span class="newword">postcondition</span> of that program
                            segment. Postconditions are known facts upon which we can build further
                            deductions about the behavior of the program. A postcondition of a program as a
                            whole is simply a fact that can be proven to be true after the program has
                            finished executing. A program can be proven to be correct by showing that the
                            postconditions of the program meet the program's specification.</p>


                        <p>Consider the following program segment, where all the variables are of type
                            <span class="ptype">double</span>:</p>


                        <pre><code class="java">disc = B*B - 4*A*C;
x = (-B + Math.sqrt(disc)) / (2*A);</code></pre>


                        <p>The quadratic formula (from high-school mathematics) assures us that the
                            value assigned to <span class="code">x</span> is a solution of the equation <span class="code">A*x<sup>2</sup> +
B*x + C = 0</span>, provided that the value of <span class="code">disc</span> is greater than or equal
                            to zero and the value of <span class="code">A</span> is not zero. <b>If</b> we can
                            guarantee that <span class="code">B*B-4*A*C&nbsp;&gt;=&nbsp;0</span> and that <span class="code">A&nbsp;!=&nbsp;0</span>, then the
                            fact that <span class="code">x</span> is a solution of the equation becomes a postcondition of
                            the program segment. We say that the condition, <span class="code">B*B-4*A*C&nbsp;&gt;=&nbsp;0</span> is a
                            <span class="newword">precondition</span> of the program segment. The condition
                            that <span class="code">A&nbsp;!=&nbsp;0</span> is another precondition. A precondition is defined to be a
                            condition that must be true at a given point in the execution of a program in
                            order for the program to continue correctly. A precondition is something that
                            you want to be true. It's something that you have to check or force to be true,
                            if you want your program to be correct.</p>


                        <p>We've encountered preconditions and postconditions once before, in <a href="ch04-07-MoreOnProgramDesign.html">Subsection&nbsp;4.7.1</a>.
                            That section introduced preconditions and
                            postconditions as a way of specifying the contract of a subroutine. As the
                            terms are being used here, a precondition of a subroutine is just a
                            precondition of the code that makes up the definition of the subroutine, and
                            the postcondition of a subroutine is a postcondition of the same code. In this
                            section, we have generalized these terms to make them more useful in talking
                            about program correctness in general.</p>


                        <p>Let's see how this works by considering a longer program segment:</p>


                        <pre><code class="java">do {
   System.out.println("Enter A, B, and C.");
   System.out.println("A must be non-zero and B*B-4*A*C must be &gt;= 0.");
   System.out.print("A = ");
   A = TextIO.getlnDouble();
   System.out.print("B = ");
   B = TextIO.getlnDouble();
   System.out.print("C = ");
   C = TextIO.getlnDouble();
   if (A == 0 || B*B - 4*A*C &lt; 0)
      System.out.println("Your input is illegal.  Try again.");
} while (A == 0 || B*B - 4*A*C &lt; 0);

disc = B*B - 4*A*C;
x = (-B + Math.sqrt(disc)) / (2*A);</code></pre>


                        <p>After the loop ends, we can be sure that <span class="code">B*B-4*A*C&nbsp;&gt;=&nbsp;0</span> and that
                            <span class="code">A&nbsp;!=&nbsp;0</span>. The preconditions for the last two lines are fulfilled, so the
                            postcondition that <span class="code">x</span> is a solution of the equation <span class="code">A*x<sup>2</sup> +
B*x + C = 0</span> is also valid. This program segment correctly and provably computes
                            a solution to the equation. (Actually, because of problems with representing real
                            numbers on computers, this is not 100% true. The <b>algorithm</b> is correct,
                            but the <b>program</b> is not a perfect implementation of the algorithm. See
                            the discussion in <a href="ch08-01-IntroductionCorrectnessandRobustness.html">Subsection&nbsp;8.1.3</a>.)</p>


                        <p>Here is another variation, in which the precondition is checked by an
                            <span class="code">if</span> statement. In the first part of the <span class="code">if</span> statement, where a
                            solution is computed and printed, we know that the preconditions are fulfilled.
                            In the other parts, we know that one of the preconditions fails to hold. In any
                            case, the program is correct.</p>


                        <pre><code class="java">System.out.println("Enter your values for A, B, and C.");
System.out.print("A = ");
A = TextIO.getlnDouble();
System.out.print("B = ");
B = TextIO.getlnDouble();
System.out.print("C = ");
C = TextIO.getlnDouble();

if (A != 0 &amp;&amp; B*B - 4*A*C &gt;= 0) {
   disc = B*B - 4*A*C;
   x = (-B + Math.sqrt(disc)) / (2*A);
   System.out.println("A solution of A*X*X + B*X + C = 0 is " + x);
}
else if (A == 0) {
   System.out.println("The value of A cannot be zero.");
}
else {
   System.out.println("Since B*B - 4*A*C is less than zero, the");
   System.out.println("equation A*X*X + B*X + C = 0 has no solution.");
}</code></pre>


                        <p>Whenever you write a program, it's a good idea to watch out for
                            preconditions and think about how your program handles them. Often, a
                            precondition can offer a clue about how to write the program.</p>


                        <p>For example, every array reference, such as <span class="code">A[i]</span>, has a
                            precondition: The index must be within the range of legal indices for the
                            array. For <span class="code">A[i]</span>, the precondition is that <span class="code">0&nbsp;&lt;=&nbsp;i
&lt;&nbsp;A.length</span>. The computer will check this condition when it evaluates
                            <span class="code">A[i]</span>, and if the condition is not satisfied, the program will be
                            terminated. In order to avoid this, you need to make sure that the index has a
                            legal value. (There is actually another precondition, namely that <span class="code">A</span> is
                            not <span class="code">null</span>, but let's leave that aside for the moment.) Consider the
                            following code, which searches for the number <span class="code">x</span> in the array
                            <span class="code">A</span> and sets the value of <span class="code">i</span> to be the index of
                            the array element that contains <span class="code">x</span>:</p>


                        <pre><code class="java">i = 0;
while (A[i] != x) {
   i++;
}</code></pre>


                        <p>As this program segment stands, it has a precondition, namely that
                            <span class="code">x</span> is actually in the array. If this precondition is satisfied, then
                            the loop will end when <span class="code">A[i]&nbsp;==&nbsp;x</span>. That is, the value of <span class="code">i</span>
                            when the loop ends will be the position of <span class="code">x</span> in the array. However, if
                            <span class="code">x</span> is not in the array, then the value of <span class="code">i</span> will just keep
                            increasing until it is equal to <span class="code">A.length</span>. At that time, the reference
                            to <span class="code">A[i]</span> is illegal and the program will be terminated. To avoid this,
                            we can add a test to make sure that the precondition for referring to
                            <span class="code">A[i]</span> is satisfied:</p>


                        <pre><code class="java">i = 0;
while (<span class="newcode">i &lt; A.length</span> &amp;&amp; A[i] != x) {
   i++;
}</code></pre>


                        <p>Now, the loop will definitely end. After it ends, <span class="code">i</span> will satisfy
                            <b>either</b> <span class="code">i&nbsp;==&nbsp;A.length</span> or <span class="code">A[i]&nbsp;==&nbsp;x</span>.
                            An <span class="code">if</span> statement
                            can be used after the loop to test which of these conditions caused the loop to
                            end:</p>


                        <pre><code class="java">i = 0;
while (i &lt; A.length &amp;&amp; A[i] != x) {
   i++;
}

if (i == A.length)
   System.out.println("x is not in the array");
else
   System.out.println("x is in position " + i);</code></pre>

                        
                        <h3 id="Invariants"><a class="header" href="#Invariants">Invariants</a></h3>
                   

                        <p>Let's look at how loops work in more detail.  Consider a
                            subroutine for finding the sum of the elements in an array of <span class="ptype">int</span>:</p>


                        <pre><code class="java">static int arraySum( int[] A ) {
    int total = 0;
    int i = 0;
    while ( i &lt; A.length ) {
        total = total + A[i];
        i = i + 1;
    }
    return total;
}</code></pre>


                        <p>(Note, by the way, that the requirements that <span class="code">A</span> is not
                            <span class="code">null</span> is a precondition of the subroutine.  If it is violated, the code in
                            the subroutine will throw a <span class="code">NullPointerException</span>.)</p>


                        <p>How can we be sure that this subroutine works?  We need to prove
                            that when the <span class="code">return</span> statement is executed, the value
                            of <span class="code">total</span> is the sum of all the elements in&nbsp;<span class="code">A</span>.  One way
                            to think about this problem is in terms of <span class="newword">loop invariants</span>.</p>


                        <p>A loop invariant is, roughly, a statement that remains true as the
                            loop is executed.  More precisely, we can show that a statement is an
                            invariant for a loop if the following holds: As long as the statement
                            is true <b>before</b> the code inside the loop is executed, then it will
                            also be true <b>after</b> the code inside the loop has been executed.  That is,
                            a loop invariant is both a precondition and a postcondition of
                            the body of the loop.</p>


                        <p>A loop invariant for the loop in the above subroutine is,
                            "<span class="code">total</span> is equal to the sum of the first <span class="code">i</span>
                            elements of&nbsp;<span class="code">A</span>."  Suppose this is
                            true at the beginning of the <span class="code">while</span> loop.  That is, before the statement
                            "<span class="code">total = total + A[i]</span>" is executed, <span class="code">total</span>
                            is the sum of the first <span class="code">i</span> elements of the
                            array (namely <span class="code">A[0]</span> through <span class="code">A[i-1]</span>).
                            After <span class="code">A[i]</span> is added to <span class="code">total</span>,
                            <span class="code">total</span> is now the sum of the first <span class="code">i+1</span>
                            elements of the array.  At this point, the loop invariant
                            is <b>not</b> true.  However, as soon as the next statement,
                            "<span class="code">i = i + 1</span>" is executed, replacing
                            <span class="code">i</span> with <span class="code">i+1</span>, the loop
                            invariant becomes true again.  We have checked that if the
                            loop invariant is true at the start of the body of the loop, then is
                            also true at the end.</p>


                        <p>Note that a loop invariant is not necessarily true at <b>every</b>
                            point during the execution of a loop.  Executing one of the statements
                            in the loop can make it false temporarily, as long as later statements
                            in the loop make it true again.</p>


                        <p>So, have we proved that the subroutine <span class="code">arraySum()</span> is
                            correct?  Not quite.  There are still a few things to check.  First of
                            all, we need to make sure that the loop invariant is true before the
                            very first time the loop is executed. At that point, <span class="code">i</span>
                            is zero, and <span class="code">total</span> is also equal to zero,  which is the
                            correct sum of zero elements.  So the loop invariant is true
                            before the loop. Once we know that, we know that it remains true after each
                            execution of the loop (because it's an invariant), and in particular,
                            we know that it will still be true after the loop ends.</p>


                        <p>But for that to do us any good, we need to check that the
                            loop actually does end!  In each execution of the loop,
                            the value of <span class="code">i</span> goes up by one.  That means that
                            eventually it has to reach <span class="code">A.length</span>.  At that
                            point, the condition in the <span class="code">while</span> loop
                            is false, and the loop ends.</p>


                        <p>After the loop ends, we know that <span class="code">i</span> equals
                            <span class="code">A.length</span>, and we know that the loop invariant
                            is true.  At that point, since <span class="code">i</span> is <span class="code">A.length</span>, the loop invariant says,
                            "<span class="code">total</span> is the sum of the first <span class="code">A.length</span>"
                            elements of&nbsp;A."  But that includes <b>all</b> of the
                            elements of <span class="code">A</span>.  So, the loop invariant gives us
                            exactly what we wanted to show:  When <span class="code">total</span> is
                            returned by the subroutine, it is equal to the sum of all the
                            elements of the array!</p>


                        <p>This might seem to you to be a lot of work to prove something
                            that's obvious.  But if you try to explain <i>why</i> it's
                            obvious that <span class="code">arraySum()</span> works, you'll probably
                            find yourself using the logic behind loop invariants, even if
                            you don't use the term.</p>


                        <p>Let's look more quickly at a similar example.  Consider a
                            subroutine that finds the maximum value in an array of <span class="ptype">int</span>,
                            where we assume that the array has length at least one:</p>


                        <pre><code class="java">static int maxInArray( int[] A ) {
    int max = A[0];
    int i = 1;
    while ( i &lt; A.length ) {
        if ( A[i] &gt; max )
            max = A[i];
        i = i + 1;
    }
    return max;
}</code></pre>


                        <p>In this case, we have a loop invariant that says,
                            "<span class="code">max</span> is the largest value among the first
                            <span class="code">i</span> elements of&nbsp;<span class="code">A</span>."
                            This statement is true before the loop starts, when
                            <span class="code">i</span> is&nbsp;1 and <span class="code">max</span> is&nbsp;<span class="code">A[0]</span>.
                            Suppose it is true at the start of the loop,
                            before the <span class="code">if</span> statement.
                            After the <span class="code">if</span> statement, <span class="code">max</span>
                            is greater than or equal to <span class="code">A[i]</span>, because
                            that is a postcondition of the <span class="code">if</span> statement,
                            and it is greater than or equal to <span class="code">A[0]</span>
                            through <span class="code">A[i-1]</span>, because of the truth
                            of the loop invariant.  Put those two facts together,
                            and you get that <span class="code">max</span> is the largest value
                            among the first <span class="code">i+1</span> elements of <span class="code">A</span>.
                            When <span class="code">i</span> is replaced by <span class="code">i+1</span> in the
                            next statement, the loop invariant becomes true again.
                            After the loop ends, <span class="code">i</span> is <span class="code">A.length</span>,
                            and the loop invariant tells us exactly
                            what we need to know:  <span class="code">max</span> is the largest
                            value in the whole array.</p>


                        <p>Loop invariants are not just useful for proving that
                            programs are correct.  Thinking in terms of loop invariants
                            can be useful when you are trying to develop an algorithm.
                            As an example, let's look at the insertion sort algorithm
                            that was discussed in <a href="ch07-05-SearchingAndSorting.html">Subsection&nbsp;7.5.3</a>.
                            Suppose that we want to sort an array <span class="code">A</span>.
                            That is, at the end of the algorithm, we want it to be
                            true that</p>


                        <pre><code class="java">A[0] &lt;= A[1] &lt;= ... &lt;= A[A.length-1]</code></pre>


                        <p>The question is, what step-by-step procedure can we use to make this statement true?
                            Well, can we come up with a loop invariant that, at the end, will become
                            the statement that we want to be true?  If we want all of the elements
                            to be sorted at the end, how about a loop invariant that says that
                            some of the elements are sorted&mdash;say, that the first <span class="code">i</span>
                            elements are sorted.  This leads to an outline for the algorithm:</p>


                        <pre><code class="java">i = 0;
while (i &lt; A.length ) {
   // Loop invariant:  A[0] &lt;= A[1] &lt;= ... &lt;= A[i-1]
      .
      .  // Code that adds A[i] to the sorted portion of the array
      .
   i = i + 1;
}
// At this point, i = A.length, and A[0] &lt;= A[1] &lt;= ... &lt;= A[A.length-1]</code></pre>


                        <p>The loop invariant is true before the <span class="code">while</span> loop,
                            and when the loop ends, the loop invariant becomes precisely the statement
                            that we want to be true at the end of the algorithm.
                            We know what we have to do to complete the
                            algorithm:  Develop code for the inside of the loop that will preserve
                            the truth of the loop invariant.  If we can do that, the loop invariant
                            will assure us that the algorithm that we have developed is correct.
                            The algorithm for adding <span class="code">A[i]</span> to the sorted portion of
                            the array will require its own loop, with its own loop invariant. I'll
                            leave you to think about that.</p>





                        <p>There is another kind of invariant that is useful for thinking
                            about programs: <span class="newword">class invariants</span>.
                            A class invariant is, roughly, a statement that is always true
                            about the state of a class, or about objects created from that class.
                            For example, suppose we have a <span class="classname">PairOfDice</span> class
                            in which the values shown on the dice are stored in instance
                            variables <span class="code">die1</span> and <span class="code">die2</span>.
                            (See <a href="ch05-02-ConstructorObjectInit.html">Section&nbsp;5.2</a> for a variety of such classes.)
                            We might like to have a class invariant that says, "the values of
                            <span class="code">die1</span> and <span class="code">die2</span> are in the range 1 through&nbsp;6."
                            (This would be a statement about any object created from the
                            <span class="classname">PairOfDice</span> class, not about the class as such.)
                            After all, this is a statement that should always be true about
                            any pair of dice.
                        </p>


                        <p>But in order to be a class invariant, the statement has to be
                            guaranteed true at all times.  If <span class="code">die1</span> and <span class="code">die2</span>
                            are <span class="code">public</span> instance variables, then no such guarantee is
                            possible, since there is no way to control what values a program that uses
                            the class might assign to them.
                            So, we are led to make <span class="code">die1</span> and <span class="code">die2</span>
                            <span class="code">private</span>.  Then we just have to make sure that all of the
                            code in the class definition respects the class invariant.
                            That is, first of all, when a <span class="classname">PairOfDice</span> object
                            is constructed, the variables <span class="code">die1</span> and <span class="code">die2</span>
                            must be initialized to be in the range 1 to&nbsp;6.  Furthermore, every
                            method in the class must preserve the truth of the class invariant.
                            In this case, that means that any method that assigns a value to
                            <span class="code">die1</span> or <span class="code">die2</span> must ensure that the
                            value is in the range 1 to&nbsp;6.  For example, a setter method
                            would have to check that a legal value is being assigned.</p>


                        <p>In general, we can say that a class invariant is a postcondition
                            of every constructor and is both a precondition and a postcondition
                            of every method in the class.  When you are writing a class, a
                            class invariant is something that you <i>want to be true</i> at
                            all times.  When you write a method, you need to make sure that
                            the code in that method respects the invariant:  Assuming that
                            the class invariant is true when the method in called, you need to
                            ensure that it will still be true after the code in the method is
                            executed.  This kind of thinking can be a very useful tool
                            for class design.</p>


                        <p>As another example, consider a dynamic array class,
                            like the one in <a href="ch07-02-ArrayProcessing.html">Subsection&nbsp;7.2.4</a>.  That class uses
                            an ordinary array to store values and a counter to keep track
                            of how many items have been added to the dyanmic array:</p>


                        <pre><code class="java">private int[] items = new int[8];
private int itemCount = 0;</code></pre>


                        <p>Class invariants include the facts that "<span class="code">itemCount</span> is the number of items,"
                            that "<span class="code">0&nbsp;&lt;=&nbsp;itemCount&nbsp;&lt;&nbsp;items.length</span>," and that "the items are in
                            the array elements <span class="code">items[0]</span> through <span class="code">items[itemCount-1]</span>."
                            Keeping these invariants in mind can be helpful when writing the class.  When writing a method
                            for adding an item, the first invariant reminds you to increment <span class="code">itemCount</span>
                            in order to ensure that the invariant remains true.  The second invariant tells you
                            where the new item has to be stored.  And the third invariant tells you that if
                            incrementing <span class="code">itemCount</span> makes it equal to <span class="code">items.length</span>,
                            then you will need to do something to avoid violating the invariant.  (Since <span class="code">itemCount</span>
                            has to be incremented, the invariant means that you will have to make the array bigger.)</p>


                        <p>In future chapters, I will occasionally point out how it can be useful to
                            think in terms of preconditions, postconditions, and invariants.</p>


                        <p>I should note that reasoning about invariants becomes much more complicated in parallel
                            programs, when several threads that are running at the same time and are accessing the
                            same data.  This will be an issue when we encounter threads in <a href="ch12-00-ThreadsandMultiprocessing.html">Chapter&nbsp;12</a>.</p>
                        
                        

                        <h3 id="Robust Handling of Input"><a class="header" href="#Robust Handling of Input">Robust Handling of Input</a></h3>
                      
                        <p>One place where correctness and robustness are important&mdash;and especially
                            difficult&mdash;is in the processing of input data, whether that data is typed in
                            by the user, read from a file, or received over a network. Files and networking
                            will be covered in <a href="ch11-00-IOStreamsFilesNetworking.html">Chapter&nbsp;11</a>, which will
                            make essential use of material that will be covered in the <a href="ch08-03-ExceptionsAndtrycatch.html">next section</a>
                            of this chapter. For now, let's look at an example of processing user input.</p>


                        <p>Examples in this textbook use my <span class="classname">TextIO</span> class for reading input
                            from the user. This class has built-in error handling. For example, the
                            function <span class="code">TextIO.getDouble()</span> is guaranteed to return a legal value of
                            type <span class="ptype">double</span>. If the user types an illegal value, then
                            <span class="classname">TextIO</span> will ask the user to re-enter their response; your
                            program never sees the illegal value.  However, this approach can be
                            clumsy and unsatisfactory, especially when the user is entering complex data.
                            In the following example, I'll do my own error-checking.</p>


                        <p>Sometimes, it's useful to be able to look ahead at what's coming up in the
                            input without actually reading it. For example, a program might need to know
                            whether the next item in the input is a number or a word. For this purpose, the
                            <span class="classname">TextIO</span> class includes the function <span class="code">TextIO.peek()</span>. This
                            function returns a <span class="ptype">char</span> which is the next character in the user's
                            input, but it does not actually read that character. If the next thing in the
                            input is an end-of-line, then <span class="code">TextIO.peek()</span> returns the new-line
                            character, <span class="code">'\n'</span>.</p>


                        <p>Often, what we really need to know is the next <b>non-blank</b>
                            character in the user's input. Before we can test this, we need to skip past
                            any spaces (and tabs). Here is a function that does this. It uses
                            <span class="code">TextIO.peek()</span> to look ahead, and it reads characters until the next
                            character in the input is either an end-of-line or some non-blank character.
                            (The function <span class="code">TextIO.getAnyChar()</span> reads and returns the next character
                            in the user's input, even if that character is a space. By contrast, the more
                            common <span class="code">TextIO.getChar()</span> would skip any blanks and then read and return
                            the next non-blank character. We can't use <span class="code">TextIO.getChar()</span> here since
                            the object is to skip the blanks <b>without</b> reading the next
                            non-blank character.)</p>


                        <pre><code class="java">/**
 * Reads past any blanks and tabs in the input.
 * Postcondition:  The next character in the input is an
 *                 end-of-line or a non-blank character.
 */
static void skipBlanks() {
   char ch;
   ch = TextIO.peek();
   while (ch == ' ' || ch == '\t') {
         // Next character is a space or tab; read it
         // and look at the character that follows it.
      ch = TextIO.getAnyChar();
      ch = TextIO.peek();
   }
} // end skipBlanks()</code></pre>


                        <p>(In fact, this operation is so common that it is built into
                            <span class="code">TextIO</span>.  The method <span class="code">TextIO.skipBlanks()</span>
                            does essentially the same thing as the <span class="code">skipBlanks()</span> method
                            presented here.)</p>


                        <p>An example in <a href="ch03-05-If.html">Subsection&nbsp;3.5.3</a> allowed the user to
                            enter length measurements such as "3 miles" or "1ft". It would then convert
                            the measurement into inches, feet, yards, and miles. But people commonly use
                            combined measurements such as "3 feet 7 inches". Let's improve the program so
                            that it allows inputs of this form.</p>


                        <p>More specifically, the user will input lines containing one or more
                            measurements such as "1 foot" or "3 miles 20 yards 2 feet". The legal units of
                            measure are inch, foot, yard, and mile. The program will also recognize plurals
                            (inches, feet, yards, miles) and abbreviations (in, ft, yd, mi). Let's write a
                            subroutine that will read one line of input of this form and compute the
                            equivalent number of inches. The main program uses the number of inches to
                            compute the equivalent number of feet, yards, and miles. If there is any error
                            in the input, the subroutine will print an error message and return the value
                            <span class="code">-1</span>. The subroutine assumes that the input line is not empty. The main program
                            tests for this before calling the subroutine and uses an empty line as a signal
                            for ending the program.</p>


                        <p>Ignoring the possibility of illegal inputs, a pseudocode algorithm for the
                            subroutine is</p>


                        <pre><code class="java">inches = 0    // This will be the total number of inches
while there is more input on the line:
    read the numerical measurement
    read the units of measure
    add the measurement to inches
return inches</code></pre>


                        <p>We can test whether there is more input on the line by checking whether the
                            next non-blank character is the end-of-line character. But this test has a
                            precondition: We have to make sure that the next character in the input is
                            in fact either an end-of-line or is a non-blank.  To ensure that, we
                            need to skip over any blank characters. So, the algorithm becomes</p>


                        <pre><code class="java">inches = 0
skipBlanks()
while TextIO.peek() is not '\n':
    read the numerical measurement
    read the unit of measure
    add the measurement to inches
    skipBlanks()
return inches</code></pre>


                        <p>Note the call to <span class="code">skipBlanks()</span> at the end of the <span class="code">while</span>
                            loop. The call to <span class="code">skipBlanks()</span> ensures that the precondition
                            for the test is again true.  More generally, if the test in a <span class="code">while</span>
                            loop has a precondition, then you have to make sure that this precondition
                            holds at the <b>end</b> of the while loop, before the computer jumps
                            back to re-evaluate the test, as well as before the start of the loop.</p>


                        <p>What about error checking? Before reading the numerical measurement, we have
                            to make sure that there is really a number there to read. Before reading the
                            unit of measure, we have to test that there is something there to read. (The
                            number might have been the last thing on the line. An input such as "3",
                            without a unit of measure, is not acceptable.) Also, we have to check that the unit of
                            measure is one of the valid units: inches, feet, yards, or miles. Here is an
                            algorithm that includes error-checking:</p>


                        <pre><code class="java">inches = 0
skipBlanks()

while TextIO.peek() is not '\n':

    if the next character is not a digit:
       report an error and return -1

    Let measurement = TextIO.getDouble();

    skipBlanks()    // Precondition for the next test!!
    if the next character is end-of-line:
       report an error and return -1
    Let units = TextIO.getWord()

    if the units are inches:
        add measurement to inches
    else if the units are feet:
        add 12*measurement to inches
    else if the units are yards:
        add 36*measurement to inches
    else if the units are miles:
        add 12*5280*measurement to inches
    else
        report an error and return -1

    skipBlanks()

return inches</code></pre>


                        <p>As you can see, error-testing adds significantly to the complexity of the
                            algorithm. Yet this is still a fairly simple example, and it doesn't even
                            handle all the possible errors. For example, if the user enters a numerical
                            measurement such as <span class="code">1e400</span> that is outside the legal range of values of type
                            <span class="ptype">double</span>, then the program will fall back on the default error-handling
                            in <span class="classname">TextIO</span>.
                            Something even more interesting happens if the measurement is "1e308 miles".
                            The number <span class="code">1e308</span> is legal, but the corresponding number of inches is outside
                            the legal range of values for type <span class="ptype">double</span>. As mentioned in the
                            <a href="ch08-01-IntroductionCorrectnessandRobustness.html">previous section</a>,
                            the computer will get the value <span class="code">Double.POSITIVE_INFINITY</span>
                            when it does the computation. You might want to run the program and try this out.</p>


                        <p>Here is the subroutine written out in Java:</p>


                        <pre><code class="java">/**
 * Reads the user's input measurement from one line of input.
 * Precondition:   The input line is not empty.
 * Postcondition:  If the user's input is legal, the measurement
 *                 is converted to inches and returned.  If the
 *                 input is not legal, the value -1 is returned.
 *                 The end-of-line is NOT read by this routine.
 */
static double readMeasurement() {

   double inches;  // Total number of inches in user's measurement.

   double measurement;  // One measurement,
                        //   such as the 12 in "12 miles"
   String units;        // The units specified for the measurement,
                        //   such as "miles"

   char ch;  // Used to peek at next character in the user's input.

   inches = 0;  // No inches have yet been read.

   skipBlanks();
   ch = TextIO.peek();

   /* As long as there is more input on the line, read a measurement and
      add the equivalent number of inches to the variable, inches.  If an
      error is detected during the loop, end the subroutine immediately
      by returning -1. */

   while (ch != '\n') {

       /* Get the next measurement and the units.  Before reading
          anything, make sure that a legal value is there to read. */

       if ( ! Character.isDigit(ch) ) {
           System.out.println(
                 "Error:  Expected to find a number, but found " + ch);
           return -1;
       }
       measurement = TextIO.getDouble();

       skipBlanks();
       if (TextIO.peek() == '\n') {
           System.out.println(
                 "Error:  Missing unit of measure at end of line.");
           return -1;
       }
       units = TextIO.getWord();
       units = units.toLowerCase();

       /* Convert the measurement to inches and add it to the total. */

       if (units.equals("inch")
               || units.equals("inches") || units.equals("in")) {
           inches += measurement;
       }
       else if (units.equals("foot")
                  || units.equals("feet") || units.equals("ft")) {
           inches += measurement * 12;
       }
       else if (units.equals("yard")
                  || units.equals("yards") || units.equals("yd")) {
           inches += measurement * 36;
       }
       else if (units.equals("mile")
                  || units.equals("miles") || units.equals("mi")) {
           inches += measurement * 12 * 5280;
       }
       else {
           System.out.println("Error: \"" + units
                             + "\" is not a legal unit of measure.");
           return -1;
       }

       /* Look ahead to see whether the next thing on the line is
          the end-of-line. */

       skipBlanks();
       ch = TextIO.peek();

   }  // end while

   return inches;

} // end readMeasurement()
</code></pre>


                        <p>The source code for the complete program can be found in the file
                            <span class="sourceref"><a href="./source/chapter8/LengthConverter2.java">LengthConverter2.java</a></span>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch08-01-IntroductionCorrectnessandRobustness.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="ch08-03-ExceptionsAndtrycatch.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch08-01-IntroductionCorrectnessandRobustness.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="ch08-03-ExceptionsAndtrycatch.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>


    </body>
</html>
